<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>E-Ticket | Flight Booking</title>
  <!-- Internal CSS: Responsive, print-friendly e-ticket design -->
  <style>
    :root{
      --brand-primary: #9D21F6;
      --brand-accent: #6FD596;
      --brand-text: #000000;
      --brand-bg: #ffffff;
      --muted: #f5f5f7;
      --line: #e8e8ef;
    }

    html, body{ height:100%; }
    *{ box-sizing: border-box; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      color: var(--brand-text);
      background: linear-gradient(180deg, #faf9ff 0%, #ffffff 100%);
    }

    .page{
      max-width: 980px;
      margin: 32px auto;
      padding: 16px;
    }

    .ticket{
      background: var(--brand-bg);
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0,0,0,.06);
      overflow: hidden;
      border: 1px solid var(--line);
    }

    /* Header */
    .ticket__header{
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 16px 20px;
      gap: 12px;
      background: radial-gradient(120% 150% at 0% 0%, rgba(157,33,246,.12) 0%, rgba(111,213,150,.12) 50%, rgba(255,255,255,0) 100%);
      border-bottom: 1px dashed var(--line);
    }
    .brand{
      display: flex;
      align-items: center;
      gap: 12px;
    }
    .brand img{
      height: 36px;
      width: auto;
      display: block;
    }
    .brand__name{
      font-weight: 700;
      letter-spacing: .2px;
      color: var(--brand-primary);
    }
    .ticket__meta{
      text-align: right;
      display: grid;
      gap: 2px;
      font-size: 12px;
      color: #444;
    }
    .etkt-label{ color:#666; }

    /* Main flight segment */
    .segment{
      display: grid;
      grid-template-columns: 1fr auto 1fr;
      gap: 12px;
      padding: 20px;
      align-items: center;
    }
    .place{
      display: grid;
      gap: 4px;
    }
    .place__city{
      font-size: 20px;
      font-weight: 700;
    }
    .place__airport{
      font-size: 12px;
      color: #555;
      line-height: 1.3;
    }
    .code{
      font-size: 40px;
      font-weight: 800;
      letter-spacing: 1px;
      color: var(--brand-primary);
    }
    .divider{
      text-align: center;
      display: grid;
      gap: 4px;
    }
    .divider .plane{
      font-size: 18px;
      color: var(--brand-primary);
    }
    .divider .timeline{
      height: 6px;
      width: min(280px, 38vw);
      background: repeating-linear-gradient(90deg, var(--line), var(--line) 8px, transparent 8px, transparent 16px);
      border-radius: 999px;
      position: relative;
      margin: 0 auto;
    }
    .timeline::after{
      content: "";
      position: absolute;
      right: -6px; top: 50%; transform: translateY(-50%);
      height: 10px; width: 10px; border-radius: 50%; background: var(--brand-accent);
      box-shadow: 0 0 0 3px rgba(111,213,150,.25);
    }

    /* Grid details */
    .details{
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 12px;
      padding: 16px 20px 8px;
    }
    .detail{
      background: var(--muted);
      border: 1px solid var(--line);
      border-radius: 10px;
      padding: 10px 12px;
      display: grid;
      gap: 6px;
      min-height: 64px;
    }
    .detail__label{ font-size: 11px; color:#666; text-transform: uppercase; letter-spacing: .6px; }
    .detail__value{ font-weight: 700; font-size: 14px; }
    .detail__sub{ font-size: 12px; color:#555; }

    /* Passenger + fare */
    .row{
      display: grid;
      grid-template-columns: 1.1fr .9fr;
      gap: 12px;
      padding: 8px 20px 20px;
    }
    .card{
      background: #fff;
      border: 1px solid var(--line);
      border-radius: 12px;
      overflow: hidden;
    }
    .card__title{
      padding: 12px 14px;
      font-weight: 700;
      border-bottom: 1px dashed var(--line);
      background: linear-gradient(180deg, rgba(157,33,246,.05), rgba(157,33,246,0));
    }
    .list{ padding: 8px 14px 14px; display: grid; gap: 10px; }
    .list__item{ display: grid; grid-template-columns: 1fr auto; gap: 8px; align-items: center; }
    .badge{
      display: inline-flex; align-items: center; gap: 6px;
      padding: 2px 8px; border-radius: 999px; font-size: 12px; font-weight: 700;
      background: var(--brand-primary); color:#fff;
    }
    .tag{ font-size: 12px; color:#444; }
    .price{ font-weight: 800; font-size: 18px; }
    .subtotal{ font-size: 12px; color:#666; }

    /* Footer */
    .ticket__footer{
      display: grid;
      grid-template-columns: 1fr auto;
      align-items: center;
      gap: 12px;
      padding: 14px 20px;
      border-top: 1px dashed var(--line);
      background: radial-gradient(120% 160% at 100% 100%, rgba(111,213,150,.15) 0%, rgba(255,255,255,0) 60%);
    }
    .barcode{
      height: 48px; width: 180px; background:
        repeating-linear-gradient(90deg,#000 0 2px,transparent 2px 4px),
        repeating-linear-gradient(90deg,transparent 0 6px,#000 6px 8px);
      border-radius: 4px;
    }
    .notice{ font-size: 11px; color:#555; }

    /* Responsive */
    @media (max-width: 900px){
      .details{ grid-template-columns: repeat(2, 1fr); }
      .row{ grid-template-columns: 1fr; }
      .ticket__header{ flex-direction: column; align-items: flex-start; }
      .ticket__meta{ text-align: left; }
    }
    @media (max-width: 540px){
      .segment{ grid-template-columns: 1fr; text-align: left; }
      .divider .timeline{ width: 100%; }
      .code{ font-size: 34px; }
      .place__city{ font-size: 18px; }
      .page{ padding: 10px; margin: 12px auto; }
    }

    /* Print styles */
    @media print{
      body{ background: #fff; }
      .page{ margin:0; padding:0; }
      .ticket{ box-shadow: none; border: 1px solid #000; border-radius: 0; }
      .barcode{ -webkit-print-color-adjust: exact; print-color-adjust: exact; }
      .ticket__header, .ticket__footer{ border-style: solid; }
    }
  </style>
</head>
<body>
  <div class="page">
    <article class="ticket" aria-label="Electronic Flight Ticket">
      <!-- Header -->
      <header class="ticket__header">
        <div class="brand">
          <img src="https://res.cloudinary.com/dfyeocma8/image/upload/v1755966703/ismxajzptaiagnsvssok.png" alt="Company Logo" />
          <div class="brand__name">E-Ticket</div>
        </div>
        <div class="ticket__meta">
          <div><span class="etkt-label">Booking Ref:</span> <strong id="ref">—</strong></div>
          <div><span class="etkt-label">Issued:</span> <span id="issued">—</span></div>
        </div>
      </header>

      <!-- Main flight segment -->
      <section class="segment" aria-label="Route">
        <div class="place">
          <div class="code" id="fromCode">AAA</div>
          <div class="place__city" id="fromCity">Origin City</div>
          <div class="place__airport" id="fromAirport">Origin Airport Name</div>
        </div>
        <div class="divider" aria-hidden="true">
          <div class="plane">✈</div>
          <div class="timeline"></div>
        </div>
        <div class="place" style="text-align:right">
          <div class="code" id="toCode">BBB</div>
          <div class="place__city" id="toCity">Destination City</div>
          <div class="place__airport" id="toAirport">Destination Airport Name</div>
        </div>
      </section>

      <!-- Details grid: aligns with standard e-ticket info -->
      <section class="details" aria-label="Flight Details">
        <div class="detail">
          <div class="detail__label">Departure</div>
          <div class="detail__value" id="depDate">—</div>
          <div class="detail__sub" id="depTime">—</div>
        </div>
        <div class="detail">
          <div class="detail__label">Return</div>
          <div class="detail__value" id="retDate">—</div>
          <div class="detail__sub" id="retTime">—</div>
        </div>
        <div class="detail">
          <div class="detail__label">Operating Carrier</div>
          <div class="detail__value" id="carrier">—</div>
          <div class="detail__sub" id="carrierCode">Airline</div>
        </div>
        <div class="detail">
          <div class="detail__label">Cabin / Class</div>
          <div class="detail__value" id="cabin">Economy</div>
          <div class="detail__sub">1 personal item + 1 carry-on (subject to airline)</div>
        </div>
      </section>

      <section class="details" aria-label="Passenger & Flight IDs">
        <div class="detail">
          <div class="detail__label">Passenger(s)</div>
          <div class="detail__value" id="passengers">—</div>
          <div class="detail__sub" id="paxBreakdown">—</div>
        </div>
        <div class="detail">
          <div class="detail__label">Flight No.</div>
          <div class="detail__value" id="flightNo">—</div>
          <div class="detail__sub" id="airlineName">—</div>
        </div>
        <div class="detail">
          <div class="detail__label">PNR / Record Locator</div>
          <div class="detail__value" id="pnr">—</div>
          <div class="detail__sub">Use this to manage booking</div>
        </div>
        <div class="detail">
          <div class="detail__label">Baggage</div>
          <div class="detail__value" id="baggage">Standard</div>
          <div class="detail__sub">Subject to fare rules</div>
        </div>
      </section>

      <div class="row">
        <div class="card">
          <div class="card__title">Passengers</div>
          <div class="list" id="passengerList">
            <!-- Filled by script: passenger names and types -->
          </div>
        </div>
        <div class="card">
          <div class="card__title">Fare Summary</div>
          <div class="list">
            <div class="list__item">
              <div class="tag">Base Fare</div>
              <div class="price" id="baseFare">₦0</div>
            </div>
            <div class="list__item">
              <div class="tag">Service Charge</div>
              <div class="price" id="serviceCharge">₦0</div>
            </div>
            <div class="list__item">
              <span class="badge">TOTAL</span>
              <div class="price" id="finalAmount">₦0</div>
            </div>
            <div class="subtotal">Amounts shown in NGN. Taxes and fees included where applicable.</div>
          </div>
        </div>
      </div>

      <footer class="ticket__footer">
        <div class="notice">
          This is an electronic ticket. A valid photo ID may be required at check-in. Please arrive at the airport early to allow time for security and boarding.
        </div>
        <div aria-hidden="true" class="barcode"></div>
      </footer>
    </article>
  </div>

  <script>
    // Demo: you can remove this mock and plug in your own orderData from your app
    // The structure follows the fields you provided.
    const demoOrderData = {
      origin: 'LOS',
      originFullName: 'Lagos',
      originAirportName: 'Murtala Muhammed International Airport',
      originAirportCode: 'LOS',
      destination: 'ABV',
      destinationFullName: 'Abuja',
      destinationAirportName: 'Nnamdi Azikiwe International Airport',
      destinationAirportCode: 'ABV',
      departureDate: new Date(),
      outboundFlightsName: 'Air Peace',
      outboundAirlineImg: 'https://via.placeholder.com/100x30?text=Airline',
      inboundFlightsName: 'Air Peace',
      inboundAirlineImg: 'https://via.placeholder.com/100x30?text=Airline',
      returnDate: null,
      adults: 1,
      children: 0,
      infants: 0,
      passengers: [
        { firstName: 'Oluwatobi', lastName: 'Adeyemi', type: 'ADT' }
      ],
      costNGN: 120000,
      serviceCharge: 3500,
      finalAmount: 123500,
      bookingRef: '2X7K9Q',
      flightNo: 'P4 713',
      pnr: 'K9Q2X7'
    };

    function formatMoney(n){
      try{ return new Intl.NumberFormat('en-NG', { style: 'currency', currency: 'NGN', maximumFractionDigits: 0 }).format(n); }catch(e){ return '₦' + (n||0).toLocaleString(); }
    }
    function formatDate(dt){
      if(!dt) return '—';
      const d = new Date(dt);
      return d.toLocaleDateString(undefined, { weekday:'short', year:'numeric', month:'short', day:'numeric' });
    }
    function formatTime(dt){
      if(!dt) return '—';
      const d = new Date(dt);
      return d.toLocaleTimeString(undefined, { hour:'2-digit', minute:'2-digit' });
    }

    function populateTicket(orderData){
      const $ = (id)=>document.getElementById(id);

      // Header
      $('ref').textContent = orderData.bookingRef || orderData.pnr || '—';
      $('issued').textContent = formatDate(new Date());

      // Segment
      $('fromCode').textContent = orderData.originAirportCode || orderData.origin || '—';
      $('fromCity').textContent = orderData.originFullName || '—';
      $('fromAirport').textContent = orderData.originAirportName || '—';

      $('toCode').textContent = orderData.destinationAirportCode || orderData.destination || '—';
      $('toCity').textContent = orderData.destinationFullName || '—';
      $('toAirport').textContent = orderData.destinationAirportName || '—';

      // Dates
      $('depDate').textContent = formatDate(orderData.departureDate);
      $('depTime').textContent = formatTime(orderData.departureDate);
      $('retDate').textContent = orderData.returnDate ? formatDate(orderData.returnDate) : '—';
      $('retTime').textContent = orderData.returnDate ? formatTime(orderData.returnDate) : '—';

      // Carrier / flight
      const carrierName = orderData.outboundFlightsName || orderData.inboundFlightsName || '—';
      $('carrier').textContent = carrierName;
      $('carrierCode').textContent = carrierName;
      $('flightNo').textContent = orderData.flightNo || '—';
      $('airlineName').textContent = carrierName;

      // PNR
      $('pnr').textContent = orderData.pnr || orderData.bookingRef || '—';

      // Passengers
      const pax = Array.isArray(orderData.passengers) ? orderData.passengers : [];
      $('passengers').textContent = pax.length.toString();
      $('paxBreakdown').textContent = `${orderData.adults||0} Adult(s) • ${orderData.children||0} Child(ren) • ${orderData.infants||0} Infant(s)`;

      const list = document.getElementById('passengerList');
      list.innerHTML = '';
      pax.forEach((p, idx)=>{
        const item = document.createElement('div');
        item.className = 'list__item';
        const name = `${p.lastName?.toUpperCase?.()||''} / ${p.firstName||''}`.trim();
        item.innerHTML = `<div><strong>${name || 'Passenger ' + (idx+1)}</strong> <span class="tag">(${p.type||'ADT'})</span></div><div class="tag">Seat: Assigned at Check-in</div>`;
        list.appendChild(item);
      });

      // Fare
      $('baseFare').textContent = formatMoney(orderData.costNGN||0);
      $('serviceCharge').textContent = formatMoney(orderData.serviceCharge||0);
      $('finalAmount').textContent = formatMoney(orderData.finalAmount||0);
    }

    // Replace demoOrderData with your app's real orderData
    populateTicket(demoOrderData);

    // Integration notes:
    // - Wire this up by calling populateTicket(orderData) with the live data.
    // - Ensure departureDate and returnDate are Date objects (or ISO strings) for correct formatting.
    // - Optional fields supported: bookingRef, pnr, flightNo.
  </script>
</body>
</html>